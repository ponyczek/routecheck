---
import AuthenticatedLayout from "@/layouts/AuthenticatedLayout.astro";
import { DashboardViewWithProvider } from "@/components/dashboard";

// Get user's timezone from locals (set by middleware) or default to Europe/Warsaw
const timezone = Astro.locals.user?.timezone || "Europe/Warsaw";
---

<AuthenticatedLayout 
  title="Dashboard – Dzisiaj | RouteCheck" 
  description="Przegląd dzisiejszych raportów kierowców i statusu floty"
>
  <div class="container mx-auto p-4 sm:p-6 lg:p-8">
    <!-- DashboardViewWithProvider includes QueryProvider for TanStack Query -->
    <DashboardViewWithProvider client:load timezone={timezone} />
  </div>
</AuthenticatedLayout>

